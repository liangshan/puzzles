# 球与盒子
把相同的球随机投到b个盒子里，其中盒子编号为1,2,...,b。每次投球相互独立，因此投球的过程是一组 **伯努利实验** 。问题是在给定的盒子里至少有一个球之前，平均至少要投多少个球？

# 解答
我们需要把这个问题分解为投中第n(1 <= n <= b)个空盒子需要投几次的b个子问题，然后将每个子问题的答案相加。

1. 显然的，第一次投球100%会命中一个空盒子;
2. 命中第二个空盒子的概率为(b-1)/b，那么投中这个盒子平均需要b/(b-1)次;
3. 命中第n个空盒子的概率为(b-n+1)/b，那么投中这个盒子平均需要b/(b-n+1)次;
4. 直到最后一个空盒子，投中的概率为(b-b+1)/b=1/b,那么投中这个盒子平均需要b/(b-b+1)=b次

将每个步骤相加可得每个盒子中至少有一个球，需要投球次数的平均期望为：

```
E(n) = b/(b-1+1) + b/(b-2+1) + ... + b/(b-n+1) + ... + b/(b-b+1)
     = b * (1/b + 1/(b-1) + ... + 1/(b-n+1) + ... +1/1)
     = b * (1 + 1/2 + 1/3 + ... + 1/n + ... +1/b) # 反过来排列更容易看清楚本质
     = b * (C + ln(b)) # 1/2 + 1/3 + ... + 1/b = ln(b)+C（C为常量）,详见欧拉定理
     ≈ b(ln(b)+1)
     
```

由此可见，如果想要把球投入10个盒子内，则平均需要尝试约30次。

类似的，如果某公司推出的集卡活动，集满一套送礼品。一套假设有10张卡片，并且你每次购买都完全随机（实际中很难完全随机），一般要买30张卡片以上才能集满。
